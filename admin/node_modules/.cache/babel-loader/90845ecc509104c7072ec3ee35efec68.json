{"remainingRequest":"/Users/mac/Desktop/vue-moba-web/admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/vue-moba-web/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/vue-moba-web/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/vue-moba-web/admin/src/views/AdEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/vue-moba-web/admin/src/views/AdEdit.vue","mtime":1581242420702},{"path":"/Users/mac/Desktop/vue-moba-web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/vue-moba-web/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/vue-moba-web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/vue-moba-web/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21hYy9EZXNrdG9wL3Z1ZS1tb2JhLXdlYi9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaWQ6IHt9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZWw6IHsKICAgICAgICBpdGVtczogW10KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCBfcmVzLCBfcmVzMjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAucHV0KCJyZXN0L2Fkcy8iLmNvbmNhdChfdGhpcy5pZCksIF90aGlzLm1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3JlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kaHR0cC5wb3N0KCJyZXN0L2FkcyIsIF90aGlzLm1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3JlczIgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9hZHMvbGlzdCIpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y5oiQ5YqfIgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRodHRwLmdldCgicmVzdC9hZHMvIi5jb25jYXQoX3RoaXMyLmlkKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLm1vZGVsID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMyLm1vZGVsLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgJiYgdGhpcy5mZXRjaCgpOwogIH0KfTs="},{"version":3,"sources":["AdEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA;AADA,KAAA;AAGA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,KAAA,CAAA,EAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAGA,KAAA,CAAA,KAAA,CAAA,GAAA,oBAAA,KAAA,CAAA,EAAA,GAAA,KAAA,CAAA,KAAA,CAHA;;AAAA;AAGA,gBAAA,IAHA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAKA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,EAAA,KAAA,CAAA,KAAA,CALA;;AAAA;AAKA,gBAAA,KALA;;AAAA;AAQA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,WAAA;;AAEA,gBAAA,KAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,KAfA;AAgBA,IAAA,KAhBA,mBAgBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,KAAA,CAAA,GAAA,oBAAA,MAAA,CAAA,EAAA,EADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,MAAA,CAAA,KAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,MAAA,CAAA,KAAA,EAAA,GAAA,CAAA,IAAA,CAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAnBA,GATA;AA8BA,EAAA,OA9BA,qBA8BA;AACA,SAAA,EAAA,IAAA,KAAA,KAAA,EAAA;AACA;AAhCA,CAAA","sourcesContent":["<template>\n  <div id=\"categoryedit\">\n    <h1>{{id ? '编辑':'新建'}}广告位</h1>\n    <el-form label-width=\"100px\" @submit.native.prevent=\"save\">\n      <el-form-item label=\"名称\">\n        <el-input v-model=\"model.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"广告\">\n        <el-button @click=\"model.items.push({})\" size=\"small\">\n        <i class=\"el-icon-plus\"></i> 添加广告\n      </el-button>\n      <el-row type=\"flex\" style=\"flex-wrap:wrap\">\n        <el-col :md=\"24\" v-for=\"(item,i) in model.items\" :key=\"i\">\n          <el-form-item label=\"跳转链接(URL)\" style=\"margin-top:10px\" label-width=\"110px\">\n            <el-input v-model=\"item.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"图片\" style=\"margin-top:10px\" label-width=\"110px\">\n            <el-upload\n              class=\"avatar-uploader\"\n              :action=\"$http.defaults.baseURL + '/upload'\"\n              :show-file-list=\"false\"\n              :on-success=\"res => $set(item,'image',res.url)\"\n            >\n              <img v-if=\"item.image\" :src=\"item.image\" class=\"avatar\" />\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          \n          <el-form-item>\n            <el-button size=\"small\" type=\"danger\" @click=\"model.items.splice(i,1)\">删除</el-button>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    id: {}\n  },\n  data() {\n    return {\n      model: { items: [] }\n    };\n  },\n  methods: {\n    async save() {\n      let res;\n      if (this.id) {\n        const res = await this.$http.put(`rest/ads/${this.id}`, this.model);\n      } else {\n        const res = await this.$http.post(\"rest/ads\", this.model);\n      }\n\n      this.$router.push(\"/ads/list\");\n\n      this.$message({\n        type: \"success\",\n        message: \"保存成功\"\n      });\n    },\n    async fetch() {\n      const res = await this.$http.get(`rest/ads/${this.id}`);\n      this.model = Object.assign({}, this.model, res.data);\n    }\n  },\n  created() {\n    this.id && this.fetch();\n  }\n};\n</script>\n\n<style>\n</style>"],"sourceRoot":"src/views"}]}